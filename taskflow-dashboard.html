<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TaskFlow â€” Command Your Day</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
button { font-family: inherit; }
a { text-decoration: none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DARK MODE TOKENS  (default â€” :root)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:               #03030a;
  --surface:          #0e0e1a;
  --surface2:         #13131f;
  --card-bg:          #0e0e1a;
  --card-bg-alpha:    rgba(14,14,26,0.97);
  --border:           rgba(201,168,76,0.18);
  --border-hover:     rgba(201,168,76,0.55);
  --text:             #e8e0cc;
  --text2:            #a89880;
  --text3:            #6a6455;
  --gold:             #c9a84c;
  --gold-dim:         rgba(201,168,76,0.12);
  --gold-glow:        rgba(201,168,76,0.28);
  --gold-glow-strong: rgba(201,168,76,0.50);
  --green:            #00e896;
  --green-dim:        rgba(0,232,150,0.12);
  --red:              #ff3a5c;
  --red-dim:          rgba(255,58,92,0.10);
  --cyan:             #00d4ff;
  --cyan-dim:         rgba(0,212,255,0.10);
  --sidebar-bg:       #080810;
  --topbar-bg:        #08080f;
  --input-bg:         rgba(14,14,26,0.9);
  --t: 0.4s ease;
  --font-display: 'Cinzel Decorative', serif;
  --font-body:    'Rajdhani', sans-serif;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIGHT MODE TOKENS  (html[data-theme="light"])
   Higher specificity (0,1,1) overrides :root (0,1,0)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
html[data-theme="light"] {
  --bg:               #faf7f0;
  --surface:          #ffffff;
  --surface2:         #f5f0e8;
  --card-bg:          #ffffff;
  --card-bg-alpha:    #ffffff;
  --border:           #e8dcc8;
  --border-hover:     #c9a84c;
  --text:             #1a1410;
  --text2:            #5c4f3a;
  --text3:            #78716c;
  --gold:             #b8860b;
  --gold-dim:         rgba(184,134,11,0.08);
  --gold-glow:        rgba(184,134,11,0.18);
  --gold-glow-strong: rgba(184,134,11,0.38);
  --green:            #059669;
  --green-dim:        rgba(5,150,105,0.10);
  --red:              #e11d48;
  --red-dim:          rgba(225,29,72,0.08);
  --cyan:             #0d9488;
  --cyan-dim:         rgba(13,148,136,0.09);
  --sidebar-bg:       #1a1a2e;   /* sidebar STAYS DARK in light mode */
  --topbar-bg:        #faf7f0;
  --input-bg:         #ffffff;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   KEYFRAMES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* 1. Grid background slow drift */
@keyframes gridDrift {
  from { transform: translateY(0); }
  to   { transform: translateY(-80px); }
}

/* 2. Logo pulse glow */
@keyframes logoPulse {
  0%,100% {
    box-shadow: 0 0 14px rgba(201,168,76,0.55),
                0 0 28px rgba(201,168,76,0.22),
                0 0 50px rgba(201,168,76,0.08);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 22px rgba(201,168,76,0.90),
                0 0 45px rgba(201,168,76,0.45),
                0 0 80px rgba(201,168,76,0.18);
    transform: scale(1.06);
  }
}

/* 3. Sidebar scan line */
@keyframes scanLine {
  0%   { left: -70%; opacity: 0; }
  15%  { opacity: 0.9; }
  85%  { opacity: 0.9; }
  100% { left: 110%; opacity: 0; }
}

/* 4. Card entrance */
@keyframes cardIn {
  from { opacity: 0; transform: translateY(22px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* 5. Float (empty state icon) */
@keyframes float {
  0%,100% { transform: translateY(0px); }
  50%      { transform: translateY(-10px); }
}

/* 6. Shimmer sweep */
@keyframes shimmer {
  from { transform: translateX(-160%) skewX(-20deg); }
  to   { transform: translateX(370%) skewX(-20deg); }
}

/* 7. Button pulse glow (dark mode only) */
@keyframes btnPulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(201,168,76,0.0); }
  50%      { box-shadow: 0 0 0 9px rgba(201,168,76,0.14), 0 4px 20px rgba(201,168,76,0.3); }
}

/* 8. Toggle spin */
@keyframes toggleSpin {
  0%   { transform: rotate(0deg) scale(1); }
  50%  { transform: rotate(180deg) scale(1.35); }
  100% { transform: rotate(360deg) scale(1); }
}

/* 9. Nav sweep */
@keyframes navSweep {
  from { transform: translateX(-100%); }
  to   { transform: translateX(120%); }
}

/* 10. Aurora pulse */
@keyframes auroraPulse {
  0%,100% { opacity: 0.45; }
  50%      { opacity: 0.72; }
}

/* 11. Count-up handled in JS via rAF */

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
html, body {
  height: 100%;
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--text);
  overflow: hidden;
  transition: background var(--t), color var(--t);
}
.app {
  display: flex;
  height: 100vh;
  position: relative;
  overflow: hidden;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AMBIENT LAYER â€” Grid + Aurora
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.grid-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}
.grid-bg::before {
  content: '';
  position: absolute;
  top: -80px; left: 0; right: 0;
  height: calc(100% + 80px);
  background-image:
    linear-gradient(rgba(201,168,76,0.055) 1px, transparent 1px),
    linear-gradient(90deg, rgba(201,168,76,0.055) 1px, transparent 1px);
  background-size: 64px 64px;
  animation: gridDrift 20s linear infinite;
}
html[data-theme="light"] .grid-bg::before {
  background-image:
    linear-gradient(rgba(184,134,11,0.045) 1px, transparent 1px),
    linear-gradient(90deg, rgba(184,134,11,0.045) 1px, transparent 1px);
}

.aurora {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  animation: auroraPulse 7s ease-in-out infinite;
  transition: opacity var(--t);
}
:root .aurora {
  background:
    radial-gradient(ellipse 65% 45% at 50% -5%,  rgba(201,168,76,0.18) 0%, transparent 68%),
    radial-gradient(ellipse 50% 55% at 102% 48%, rgba(0,212,255,0.10) 0%, transparent 65%),
    radial-gradient(ellipse 50% 55% at -2%  52%, rgba(255,58,92,0.09) 0%, transparent 65%);
}
html[data-theme="light"] .aurora {
  background:
    radial-gradient(ellipse 65% 45% at 50% -5%,  rgba(184,134,11,0.09) 0%, transparent 68%),
    radial-gradient(ellipse 50% 55% at 102% 48%, rgba(13,148,136,0.06) 0%, transparent 65%),
    radial-gradient(ellipse 50% 55% at -2%  52%, rgba(225,29,72,0.05) 0%, transparent 65%);
}

/* Light-mode: diamond texture on content area */
.diamond-overlay {
  position: fixed;
  left: 260px; top: 58px; right: 0; bottom: 0;
  pointer-events: none;
  z-index: 0;
  opacity: 0;
  transition: opacity var(--t);
  background-image:
    repeating-linear-gradient( 45deg, rgba(184,134,11,0.024) 0, rgba(184,134,11,0.024) 1px, transparent 0, transparent 50%),
    repeating-linear-gradient(-45deg, rgba(184,134,11,0.024) 0, rgba(184,134,11,0.024) 1px, transparent 0, transparent 50%);
  background-size: 22px 22px;
}
html[data-theme="light"] .diamond-overlay { opacity: 1; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR (always dark â€” both modes)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sidebar {
  width: 260px;
  min-width: 260px;
  height: 100vh;
  background: var(--sidebar-bg);
  border-right: 1px solid rgba(201,168,76,0.28);
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 10;
  overflow: hidden;
  transition: background var(--t);
}

/* â”€â”€ Scan line â”€â”€ */
.scan-wrap {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  overflow: hidden;
  z-index: 20;
  pointer-events: none;
}
.scan-wrap::after {
  content: '';
  position: absolute;
  top: 0;
  width: 60%;
  height: 100%;
  background: linear-gradient(90deg, transparent, #c9a84c, transparent);
  animation: scanLine 5s ease-in-out infinite;
  left: 0;
}

/* â”€â”€ Logo â”€â”€ */
.logo-area {
  padding: 22px 18px 18px;
  display: flex;
  align-items: center;
  gap: 13px;
  border-bottom: 1px solid rgba(201,168,76,0.14);
  flex-shrink: 0;
}
.logo-icon {
  width: 46px; height: 46px;
  border-radius: 12px;
  background: linear-gradient(135deg, #8a6010, #c9a84c, #f0d060, #c9a84c, #8a6010);
  background-size: 200% 200%;
  display: flex; align-items: center; justify-content: center;
  font-size: 23px;
  flex-shrink: 0;
  animation: logoPulse 3.5s ease-in-out infinite;
  cursor: pointer;
  user-select: none;
}
.logo-text-wrap { overflow: hidden; }
.logo-wordmark {
  font-family: var(--font-display);
  font-size: 15.5px;
  font-weight: 700;
  letter-spacing: 2px;
  background: linear-gradient(135deg, #f5df80, #c9a84c, #edd060, #c9a84c, #f5df80);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.1;
  white-space: nowrap;
}
.logo-tagline {
  font-family: var(--font-body);
  font-size: 9px;
  letter-spacing: 2.5px;
  text-transform: uppercase;
  color: #4a4030;
  margin-top: 3px;
}

/* â”€â”€ Nav â”€â”€ */
.nav {
  flex: 1;
  padding: 14px 10px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  overflow-y: auto;
}
.nav-section-label {
  font-family: var(--font-display);
  font-size: 7px;
  letter-spacing: 3px;
  color: #302820;
  text-transform: uppercase;
  padding: 10px 10px 4px;
}
.nav-item {
  display: flex;
  align-items: center;
  gap: 11px;
  padding: 9px 12px;
  border-radius: 9px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  border: 1px solid transparent;
  text-decoration: none;
  transition: background 0.2s, border-color 0.2s;
}

/* Left glow bar */
.nav-item::before {
  content: '';
  position: absolute;
  left: 0; top: 14%; bottom: 14%;
  width: 0;
  border-radius: 0 3px 3px 0;
  background: #c9a84c;
  box-shadow: 0 0 14px #c9a84c, 0 0 28px rgba(201,168,76,0.4);
  transition: width 0.2s ease;
  z-index: 2;
}
/* Hover light sweep */
.nav-sweep {
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, transparent 0%, rgba(201,168,76,0.11) 50%, transparent 100%);
  transform: translateX(-100%);
  pointer-events: none;
  z-index: 1;
}
.nav-item:hover .nav-sweep { animation: navSweep 0.45s ease forwards; }
.nav-item:hover        { background: rgba(201,168,76,0.07); border-color: rgba(201,168,76,0.18); }
.nav-item:hover::before  { width: 3px; }
.nav-item.active         { background: rgba(201,168,76,0.11); border-color: rgba(201,168,76,0.28); }
.nav-item.active::before { width: 3px; }

.nav-icon {
  font-size: 15px;
  width: 20px; text-align: center;
  flex-shrink: 0;
  opacity: 0.65;
  transition: opacity 0.2s;
  position: relative; z-index: 3;
}
.nav-item:hover .nav-icon,
.nav-item.active .nav-icon { opacity: 1; }

.nav-label {
  font-family: var(--font-display);
  font-size: 9px;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: #7a6a55;
  flex: 1;
  transition: color 0.2s;
  position: relative; z-index: 3;
}
.nav-item:hover .nav-label { color: #c9a84c; }
.nav-item.active .nav-label { color: #c9a84c; }

.nav-badge {
  font-family: var(--font-body);
  font-size: 7.5px;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: #4a4030;
  border: 1px solid rgba(201,168,76,0.25);
  border-radius: 4px;
  padding: 1px 5px;
  position: relative; z-index: 3;
}

/* â”€â”€ User card â”€â”€ */
.user-area {
  padding: 8px 10px 4px;
  border-top: 1px solid rgba(201,168,76,0.12);
}
.user-card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 11px;
  border-radius: 10px;
  border: 1px solid rgba(201,168,76,0.14);
  cursor: pointer;
  transition: background 0.2s, border-color 0.2s;
}
.user-card:hover { background: rgba(201,168,76,0.07); border-color: rgba(201,168,76,0.35); }
.user-avatar {
  width: 34px; height: 34px;
  border-radius: 50%;
  background: linear-gradient(135deg, #c9a84c, #00d4ff);
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-display);
  font-size: 11px; font-weight: 700;
  color: #08080f;
  border: 2px solid rgba(201,168,76,0.4);
  flex-shrink: 0;
  transition: border-color 0.2s;
}
.user-card:hover .user-avatar { border-color: #c9a84c; }
.user-name {
  font-family: var(--font-display);
  font-size: 9.5px; letter-spacing: 0.8px;
  color: #c9a84c;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.user-email {
  font-family: var(--font-body);
  font-size: 10px; color: #4a4030;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

.signout-btn {
  display: flex; align-items: center; gap: 8px;
  padding: 7px 13px;
  margin: 4px 0 12px;
  border-radius: 8px;
  cursor: pointer;
  border: none; background: transparent;
  color: #4a4030;
  font-family: var(--font-display);
  font-size: 8px; letter-spacing: 1.5px; text-transform: uppercase;
  width: 100%;
  transition: background 0.2s, color 0.2s;
}
.signout-btn:hover { background: rgba(255,58,92,0.12); color: #ff3a5c; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN AREA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
  z-index: 5;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbar {
  height: 58px;
  background: var(--topbar-bg);
  display: flex; align-items: center;
  gap: 16px; padding: 0 24px;
  flex-shrink: 0;
  z-index: 20;
  position: relative;
  transition: background var(--t);
}
/* Gold gradient bottom border */
.topbar::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(201,168,76,0.25) 15%,
    var(--gold) 50%,
    rgba(201,168,76,0.25) 85%,
    transparent 100%
  );
  transition: background var(--t);
}
.topbar-date {
  font-family: var(--font-display);
  font-size: 10px; letter-spacing: 1.5px;
  color: var(--text3);
  white-space: nowrap; flex-shrink: 0;
  transition: color var(--t);
}
.search-wrap {
  flex: 1; max-width: 380px;
  position: relative;
}
.search-icon {
  position: absolute;
  left: 14px; top: 50%;
  transform: translateY(-50%);
  color: var(--text3); font-size: 14px;
  pointer-events: none;
}
.search-input {
  width: 100%; height: 36px;
  background: var(--input-bg);
  border: 1px solid var(--border);
  border-radius: 100px;
  padding: 0 44px 0 38px;
  font-family: var(--font-body); font-size: 13px;
  color: var(--text);
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s, background var(--t), color var(--t);
}
.search-input::placeholder { color: var(--text3); }
.search-input:focus {
  border-color: var(--gold);
  box-shadow: 0 0 0 3px var(--gold-dim);
}
.search-kbd {
  position: absolute;
  right: 12px; top: 50%; transform: translateY(-50%);
  font-family: var(--font-body); font-size: 9.5px;
  color: var(--text3);
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 4px; padding: 1px 5px;
  transition: background var(--t), border-color var(--t);
}
.topbar-spacer { flex: 1; }
.topbar-actions { display: flex; align-items: center; gap: 4px; }

.icon-btn {
  width: 36px; height: 36px;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  background: transparent;
  border: 1px solid transparent;
  color: var(--text3); cursor: pointer;
  font-size: 17px; line-height: 1;
  transition: background 0.2s, color 0.2s, border-color 0.2s;
}
.icon-btn:hover {
  background: var(--surface);
  border-color: var(--border);
  color: var(--gold);
}
#themeToggle.spinning { animation: toggleSpin 0.45s cubic-bezier(0.4,0,0.2,1); }

.bell-wrap { position: relative; }
.bell-dot {
  position: absolute; top: 7px; right: 7px;
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--red);
  border: 1.5px solid var(--topbar-bg);
  transition: background var(--t), border-color var(--t);
}
.topbar-avatar {
  width: 34px; height: 34px; border-radius: 50%;
  background: linear-gradient(135deg, #c9a84c, #00d4ff);
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-display); font-size: 11px; font-weight: 700;
  color: #080810;
  border: 2px solid rgba(201,168,76,0.4);
  cursor: pointer; margin-left: 5px;
  transition: border-color 0.2s;
}
.topbar-avatar:hover { border-color: var(--gold); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTENT LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.content {
  flex: 1; overflow: hidden;
  display: flex; gap: 0;
  position: relative;
}
.content-main {
  flex: 1; overflow-y: auto;
  padding: 28px 22px 32px 28px;
  position: relative; z-index: 1;
}

/* â”€â”€ Greeting â”€â”€ */
.greeting {
  margin-bottom: 28px;
  opacity: 0;
  animation: cardIn 0.5s ease 0.05s forwards;
}
.greeting h1 {
  font-family: var(--font-display);
  font-size: 23px; font-weight: 700;
  letter-spacing: 1.5px;
  color: var(--text); line-height: 1.2;
  transition: color var(--t);
}
.greeting p {
  font-family: var(--font-body);
  font-size: 14px; color: var(--text3);
  margin-top: 5px;
  transition: color var(--t);
}
.greeting-accent { color: var(--gold); font-weight: 700; transition: color var(--t); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STAT CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stat-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
  margin-bottom: 28px;
}
.stat-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 20px 18px 18px;
  position: relative; overflow: hidden;
  cursor: pointer;
  opacity: 0;
  animation: cardIn 0.45s ease forwards;
  transition:
    transform 0.25s ease,
    border-color 0.25s ease,
    box-shadow 0.25s ease,
    background var(--t);
}
.stat-card:nth-child(1) { animation-delay: 80ms; }
.stat-card:nth-child(2) { animation-delay: 180ms; }
.stat-card:nth-child(3) { animation-delay: 280ms; }
.stat-card:nth-child(4) { animation-delay: 380ms; }

.stat-card:hover {
  transform: translateY(-4px);
  border-color: var(--border-hover);
}
:root .stat-card:hover {
  box-shadow: 0 8px 32px var(--gold-glow), 0 2px 10px rgba(0,0,0,0.5);
}
html[data-theme="light"] .stat-card:hover {
  box-shadow: 0 8px 32px rgba(184,134,11,0.14), 0 2px 10px rgba(0,0,0,0.07);
}

/* Shimmer on hover */
.stat-card::after {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 50%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.055), transparent);
  transform: translateX(-200%) skewX(-15deg);
}
.stat-card:hover::after { animation: shimmer 0.7s ease; }

.stat-icon-box {
  width: 42px; height: 42px;
  border-radius: 11px;
  display: flex; align-items: center; justify-content: center;
  font-size: 19px;
  margin-bottom: 14px;
}
.stat-number {
  font-family: var(--font-body);
  font-size: 52px; font-weight: 700;
  line-height: 1; letter-spacing: -1px;
  transition: color var(--t);
}
.stat-label {
  font-family: var(--font-display);
  font-size: 8px; letter-spacing: 2.5px;
  text-transform: uppercase;
  color: var(--text3);
  margin-top: 8px;
  transition: color var(--t);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION HEADER + NEW TASK BUTTON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.section-header {
  display: flex; align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
}
.section-title {
  font-family: var(--font-display);
  font-size: 10.5px; letter-spacing: 2.5px;
  text-transform: uppercase;
  color: var(--text2);
  transition: color var(--t);
}
.view-all {
  font-family: var(--font-body);
  font-size: 11px; letter-spacing: 0.5px;
  color: var(--gold); opacity: 0.7; cursor: pointer;
  transition: opacity 0.2s, color var(--t);
}
.view-all:hover { opacity: 1; }

.btn-new {
  display: flex; align-items: center; gap: 7px;
  padding: 9px 20px;
  border-radius: 9px; border: none; cursor: pointer;
  font-family: var(--font-display);
  font-size: 8.5px; letter-spacing: 1.5px; text-transform: uppercase;
  position: relative; overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s;
}
:root .btn-new {
  background: linear-gradient(135deg, #8a6010, #c9a84c, #f0d050, #c9a84c, #8a6010);
  color: #08080f;
  animation: btnPulse 2.8s ease-in-out infinite;
}
html[data-theme="light"] .btn-new {
  background: linear-gradient(135deg, #b8860b, #c9a84c, #b8860b);
  color: #ffffff;
  animation: none;
}
/* Shimmer sweep */
.btn-new::after {
  content: '';
  position: absolute; top: 0; left: -100%;
  width: 55%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.32), transparent);
  transform: skewX(-20deg);
}
.btn-new:hover::after { animation: shimmer 0.55s ease; }
.btn-new:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 24px var(--gold-glow-strong);
}
.btn-new-icon { font-size: 13px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TASK CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.task-list { display: flex; flex-direction: column; gap: 9px; margin-bottom: 26px; }
.task-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 13px 14px 13px 18px;
  display: flex; align-items: flex-start; gap: 12px;
  cursor: pointer; position: relative; overflow: hidden;
  opacity: 0;
  animation: cardIn 0.4s ease forwards;
  transition:
    transform 0.25s ease,
    border-color 0.25s ease,
    box-shadow 0.25s ease,
    background var(--t);
}
.task-card:hover { transform: translateY(-2px); border-color: var(--border-hover); }
:root .task-card:hover { box-shadow: 0 4px 22px var(--gold-glow); }
html[data-theme="light"] .task-card:hover {
  box-shadow: 0 4px 22px rgba(184,134,11,0.14);
}

.task-status-bar {
  position: absolute;
  left: 0; top: 20%; bottom: 20%;
  width: 3px; border-radius: 0 2px 2px 0;
}
.task-status-bar.pending { background: var(--gold); box-shadow: 0 0 8px var(--gold-glow); }
.task-status-bar.done    { background: var(--green); box-shadow: 0 0 8px rgba(0,232,150,0.4); }

.task-check {
  width: 20px; height: 20px;
  border-radius: 6px; border: 2px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; margin-top: 1px; font-size: 11px;
  transition: border-color 0.2s, background 0.2s, color var(--t);
}
.task-check.done    { background: var(--green-dim); border-color: var(--green); color: var(--green); }
.task-check.pending { border-color: rgba(201,168,76,0.35); }

.task-body { flex: 1; min-width: 0; }
.task-title {
  font-family: var(--font-body);
  font-size: 14px; font-weight: 600;
  color: var(--text); line-height: 1.4;
  transition: color var(--t);
}
.task-title.done { text-decoration: line-through; color: var(--text3); }
.task-desc {
  font-family: var(--font-body);
  font-size: 12px; color: var(--text3);
  margin-top: 2px; line-height: 1.4;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  transition: color var(--t);
}
.task-meta {
  display: flex; align-items: center; gap: 6px;
  margin-top: 8px; flex-wrap: wrap;
}
.pill {
  font-family: var(--font-body);
  font-size: 10px; font-weight: 600; letter-spacing: 0.3px;
  border-radius: 100px; padding: 2px 8px; border: 1px solid;
}
.pill-gold  { background: rgba(201,168,76,0.12); color: var(--gold); border-color: rgba(201,168,76,0.28); }
.pill-green { background: var(--green-dim); color: var(--green); border-color: rgba(0,232,150,0.28); }
.pill-cyan  { background: var(--cyan-dim); color: var(--cyan); border-color: rgba(0,212,255,0.22); }
.pill-red   { background: var(--red-dim); color: var(--red); border-color: rgba(255,58,92,0.22); }
.pill-muted { background: transparent; color: var(--text3); border-color: var(--border); }

.task-dots {
  margin-left: auto; align-self: center;
  color: var(--text3); font-size: 18px; letter-spacing: 1.5px; line-height: 1;
  cursor: pointer; padding: 3px 6px; border-radius: 6px;
  transition: background 0.2s, color 0.2s;
}
.task-dots:hover { background: var(--surface); color: var(--gold); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.empty-state {
  border: 2px dashed rgba(201,168,76,0.30);
  border-radius: 18px;
  padding: 54px 24px;
  text-align: center;
  box-shadow: inset 0 0 60px rgba(201,168,76,0.04);
  margin-bottom: 24px;
  opacity: 0;
  animation: cardIn 0.4s ease 0.5s forwards;
  transition: border-color var(--t), box-shadow var(--t);
}
html[data-theme="light"] .empty-state {
  border-color: rgba(184,134,11,0.26);
  box-shadow: inset 0 0 60px rgba(184,134,11,0.06);
}
.empty-icon {
  font-size: 54px; display: block;
  animation: float 3.5s ease-in-out infinite;
  margin-bottom: 16px;
}
.empty-title {
  font-family: var(--font-display);
  font-size: 15px; letter-spacing: 1.5px;
  color: var(--text2); margin-bottom: 8px;
  transition: color var(--t);
}
.empty-sub {
  font-family: var(--font-body);
  font-size: 13px; color: var(--text3); font-style: italic;
  margin-bottom: 18px; transition: color var(--t);
}
.empty-cta {
  font-family: var(--font-body);
  font-size: 13px; color: var(--gold);
  text-decoration: underline;
  text-decoration-color: rgba(201,168,76,0.3);
  cursor: pointer;
  transition: text-decoration-color 0.2s, color var(--t);
}
.empty-cta:hover { text-decoration-color: var(--gold); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANALYTICS PANEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.analytics-panel {
  width: 272px; min-width: 272px;
  padding: 28px 20px 28px 0;
  display: flex; flex-direction: column; gap: 14px;
  overflow-y: auto;
}
.a-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 14px; padding: 18px;
  opacity: 0; animation: cardIn 0.4s ease forwards;
  transition: background var(--t), border-color 0.25s;
}
.a-card:hover { border-color: var(--border-hover); }
.a-card:nth-child(1) { animation-delay: 400ms; }
.a-card:nth-child(2) { animation-delay: 500ms; }
.a-card:nth-child(3) { animation-delay: 600ms; }

.a-title {
  font-family: var(--font-display);
  font-size: 9.5px; letter-spacing: 2.5px; text-transform: uppercase;
  color: var(--gold); margin-bottom: 16px;
  transition: color var(--t);
}

/* Progress rings */
.ring-row { display: flex; gap: 12px; justify-content: center; }
.ring-item { display: flex; flex-direction: column; align-items: center; gap: 5px; }
.ring-svg { transform: rotate(-90deg); display: block; }
.ring-track { stroke: var(--border); fill: none; transition: stroke var(--t); }
.ring-fill  { fill: none; stroke-linecap: round; transition: stroke-dashoffset 1.15s cubic-bezier(0.4,0,0.2,1); }
.ring-val {
  font-family: var(--font-body);
  font-size: 15px; font-weight: 700;
  color: var(--text); transition: color var(--t);
}
.ring-lbl {
  font-family: var(--font-display);
  font-size: 7px; letter-spacing: 1.5px; text-transform: uppercase;
  color: var(--text3); transition: color var(--t);
}

/* Distribution bars */
.dist-section { margin-top: 16px; display: flex; flex-direction: column; gap: 10px; }
.dist-header {
  display: flex; justify-content: space-between;
  font-family: var(--font-body); font-size: 11px;
  color: var(--text3); margin-bottom: 4px;
  transition: color var(--t);
}
.dist-track {
  height: 5px;
  background: var(--border); border-radius: 100px;
  overflow: hidden; transition: background var(--t);
}
.dist-fill {
  height: 100%; border-radius: 100px; width: 0;
  transition: width 1.15s cubic-bezier(0.4,0,0.2,1);
}

/* Weekly chart */
.week-chart {
  display: flex; align-items: flex-end;
  gap: 5px; height: 64px; margin-top: 4px;
}
.wbar-col {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; gap: 5px;
  height: 100%; justify-content: flex-end;
}
.wbar {
  width: 100%; border-radius: 3px 3px 0 0;
  background: var(--border); min-height: 3px;
  transition: background 0.2s, height 0.9s ease;
}
.wbar.today { background: var(--gold); }
.wbar:not(.today):hover { background: rgba(201,168,76,0.35); cursor: pointer; }
.wday {
  font-family: var(--font-body);
  font-size: 8px; color: var(--text3); text-align: center;
  transition: color var(--t);
}
.wday.today { color: var(--gold); font-weight: 700; }

/* Streak card center */
.streak-center { text-align: center; padding: 4px 0; }
.streak-emoji { font-size: 36px; display: block; animation: float 3.2s ease-in-out infinite; margin-bottom: 6px; }
.streak-num {
  font-family: var(--font-body);
  font-size: 30px; font-weight: 700;
  color: var(--gold); line-height: 1;
  transition: color var(--t);
}
.streak-sub {
  font-family: var(--font-display);
  font-size: 7.5px; letter-spacing: 2px; text-transform: uppercase;
  color: var(--text3); margin-top: 5px;
  transition: color var(--t);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHAT WIDGET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes chatSlideUp {
  from { opacity: 0; transform: translateY(18px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0)   scale(1);    }
}
@keyframes fabPulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(201,168,76,0), 0 8px 24px rgba(201,168,76,0.35); }
  50%      { box-shadow: 0 0 0 10px rgba(201,168,76,0.12), 0 8px 32px rgba(201,168,76,0.5); }
}
@keyframes dotBounce {
  0%,100% { transform: translateY(0); }
  50%      { transform: translateY(-5px); }
}

/* FAB */
.chat-fab {
  position: fixed; bottom: 24px; right: 24px;
  width: 56px; height: 56px; border-radius: 50%;
  background: linear-gradient(135deg, #8a6010, #c9a84c, #f0d060, #c9a84c, #8a6010);
  border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px;
  box-shadow: 0 8px 24px rgba(201,168,76,0.38);
  z-index: 50;
  transition: transform 0.2s, box-shadow 0.2s;
  animation: fabPulse 3s ease-in-out infinite;
}
.chat-fab:hover {
  transform: scale(1.1);
  box-shadow: 0 12px 36px rgba(201,168,76,0.55);
  animation: none;
}
.chat-fab.open { animation: none; background: linear-gradient(135deg, #5a3008, #8a5020); }

/* Panel */
.chat-panel {
  position: fixed; bottom: 92px; right: 24px;
  width: 380px; height: 520px;
  z-index: 49;
  display: flex; flex-direction: column;
  background: var(--card-bg);
  border: 1px solid var(--border-hover);
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 24px 64px rgba(0,0,0,0.55), 0 0 0 1px rgba(201,168,76,0.12);
  animation: chatSlideUp 0.3s cubic-bezier(0.4,0,0.2,1);
  transition: background var(--t), border-color var(--t);
}
html[data-theme="light"] .chat-panel {
  box-shadow: 0 24px 64px rgba(0,0,0,0.14), 0 0 0 1px rgba(184,134,11,0.15);
}

/* Panel header */
.chat-header {
  display: flex; align-items: center; gap: 10px;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  background: var(--surface2);
  transition: background var(--t), border-color var(--t);
}
.chat-header-avatar {
  width: 34px; height: 34px; border-radius: 50%;
  background: linear-gradient(135deg, #c9a84c, #f0d060);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; flex-shrink: 0;
  box-shadow: 0 0 10px rgba(201,168,76,0.4);
}
.chat-header-name {
  font-family: var(--font-display);
  font-size: 11px; letter-spacing: 1.5px;
  color: var(--text); flex: 1;
  transition: color var(--t);
}
.chat-header-sub {
  font-family: var(--font-body);
  font-size: 10px; color: var(--green);
  margin-top: 2px;
}
.chat-close {
  width: 28px; height: 28px; border-radius: 6px;
  display: flex; align-items: center; justify-content: center;
  background: transparent; border: none;
  color: var(--text3); cursor: pointer; font-size: 16px;
  transition: background 0.15s, color 0.15s;
}
.chat-close:hover { background: var(--surface); color: var(--red); }

/* Messages area */
.chat-messages {
  flex: 1; overflow-y: auto;
  padding: 16px; display: flex;
  flex-direction: column; gap: 10px;
}

/* Empty state */
.chat-empty {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 10px; padding: 32px 16px; text-align: center;
  flex: 1;
}
.chat-empty-icon {
  width: 52px; height: 52px; border-radius: 50%;
  background: var(--gold-dim);
  border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 22px; margin-bottom: 4px;
}
.chat-empty-title {
  font-family: var(--font-display);
  font-size: 11px; letter-spacing: 1.5px;
  color: var(--text2); transition: color var(--t);
}
.chat-empty-sub {
  font-family: var(--font-body);
  font-size: 12px; color: var(--text3);
  line-height: 1.5; transition: color var(--t);
}
/* Prompt chips */
.chat-chips {
  display: flex; flex-wrap: wrap; gap: 6px;
  justify-content: center; margin-top: 8px;
}
.chat-chip {
  font-family: var(--font-body); font-size: 11px;
  color: var(--gold); border: 1px solid var(--border);
  border-radius: 100px; padding: 4px 10px;
  cursor: pointer; background: var(--gold-dim);
  transition: border-color 0.2s, background 0.2s;
}
.chat-chip:hover { border-color: var(--gold); background: rgba(201,168,76,0.18); }

/* Bubbles */
.bubble-row {
  display: flex; gap: 8px; align-items: flex-end;
}
.bubble-row.user { flex-direction: row-reverse; }
.bubble-avatar {
  width: 26px; height: 26px; border-radius: 50%; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px;
}
.bubble-avatar.bot  { background: linear-gradient(135deg, #c9a84c, #f0d060); }
.bubble-avatar.user { background: linear-gradient(135deg, #c9a84c, #00d4ff); font-family: var(--font-display); font-size: 9px; color: #08080f; }
.bubble {
  max-width: 78%; padding: 9px 13px;
  font-family: var(--font-body); font-size: 13px; line-height: 1.5;
  white-space: pre-wrap; word-break: break-word;
  border-radius: 14px;
}
.bubble.bot  {
  background: var(--surface2);
  color: var(--text);
  border-bottom-left-radius: 3px;
  border: 1px solid var(--border);
  transition: background var(--t), color var(--t), border-color var(--t);
}
.bubble.user {
  background: linear-gradient(135deg, #8a6010, #c9a84c);
  color: #080810;
  border-bottom-right-radius: 3px;
}

/* Typing indicator */
.typing-row { display: flex; gap: 8px; align-items: flex-end; }
.typing-dots {
  padding: 10px 14px;
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: 14px; border-bottom-left-radius: 3px;
  display: flex; gap: 4px; align-items: center;
  transition: background var(--t), border-color var(--t);
}
.typing-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--text3);
}
.typing-dot:nth-child(1) { animation: dotBounce 1s ease-in-out 0ms   infinite; }
.typing-dot:nth-child(2) { animation: dotBounce 1s ease-in-out 160ms infinite; }
.typing-dot:nth-child(3) { animation: dotBounce 1s ease-in-out 320ms infinite; }

/* Input area */
.chat-input-area {
  padding: 12px 14px;
  border-top: 1px solid var(--border);
  display: flex; gap: 8px; align-items: flex-end;
  flex-shrink: 0; background: var(--surface2);
  transition: background var(--t), border-color var(--t);
}
.chat-textarea {
  flex: 1; min-height: 36px; max-height: 100px;
  background: var(--card-bg); border: 1px solid var(--border);
  border-radius: 10px; padding: 8px 12px;
  font-family: var(--font-body); font-size: 13px; color: var(--text);
  resize: none; outline: none; line-height: 1.5;
  transition: border-color 0.2s, background var(--t), color var(--t);
}
.chat-textarea::placeholder { color: var(--text3); }
.chat-textarea:focus { border-color: var(--gold); box-shadow: 0 0 0 2px var(--gold-dim); }
.chat-send {
  width: 36px; height: 36px; border-radius: 9px; flex-shrink: 0;
  background: linear-gradient(135deg, #8a6010, #c9a84c, #f0d060);
  border: none; cursor: pointer; font-size: 15px;
  display: flex; align-items: center; justify-content: center;
  transition: transform 0.15s, box-shadow 0.15s, opacity 0.15s;
  box-shadow: 0 2px 10px rgba(201,168,76,0.3);
}
.chat-send:hover:not(:disabled) { transform: scale(1.08); box-shadow: 0 4px 16px rgba(201,168,76,0.5); }
.chat-send:disabled { opacity: 0.45; cursor: not-allowed; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLLBARS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.18); border-radius: 100px; }
::-webkit-scrollbar-thumb:hover { background: rgba(201,168,76,0.4); }
</style>
</head>

<body>
<div class="app">

  <!-- â”€â”€ Ambient layers â”€â”€ -->
  <div class="grid-bg"></div>
  <div class="aurora"></div>
  <div class="diamond-overlay"></div>

  <!-- â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â• -->
  <aside class="sidebar">
    <div class="scan-wrap"></div>

    <!-- Logo -->
    <div class="logo-area">
      <div class="logo-icon">âš¡</div>
      <div class="logo-text-wrap">
        <div class="logo-wordmark">TaskFlow</div>
        <div class="logo-tagline">Command Your Day</div>
      </div>
    </div>

    <!-- Nav -->
    <nav class="nav">
      <div class="nav-section-label">Workspace</div>

      <a class="nav-item active" href="#" onclick="return false">
        <div class="nav-sweep"></div>
        <span class="nav-icon">â¬¡</span>
        <span class="nav-label">Dashboard</span>
      </a>
      <a class="nav-item" href="#" onclick="return false">
        <div class="nav-sweep"></div>
        <span class="nav-icon">âœ¦</span>
        <span class="nav-label">All Tasks</span>
      </a>
      <a class="nav-item" href="#" onclick="return false">
        <div class="nav-sweep"></div>
        <span class="nav-icon">â—ˆ</span>
        <span class="nav-label">AI Agent</span>
      </a>

      <div class="nav-section-label" style="margin-top:10px">Organize</div>

      <a class="nav-item" href="#" onclick="return false">
        <div class="nav-sweep"></div>
        <span class="nav-icon">â—‡</span>
        <span class="nav-label">Projects</span>
        <span class="nav-badge">Soon</span>
      </a>
      <a class="nav-item" href="#" onclick="return false">
        <div class="nav-sweep"></div>
        <span class="nav-icon">â–³</span>
        <span class="nav-label">Calendar</span>
        <span class="nav-badge">Soon</span>
      </a>
      <a class="nav-item" href="#" onclick="return false">
        <div class="nav-sweep"></div>
        <span class="nav-icon">â—‰</span>
        <span class="nav-label">Analytics</span>
        <span class="nav-badge">Soon</span>
      </a>
    </nav>

    <!-- User -->
    <div class="user-area">
      <div class="user-card">
        <div class="user-avatar">JO</div>
        <div>
          <div class="user-name">Jannat Osmani</div>
          <div class="user-email">jannat@taskflow.io</div>
        </div>
      </div>
      <button class="signout-btn">
        <span>â†©</span>
        <span>Sign Out</span>
      </button>
    </div>
  </aside>

  <!-- â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â• -->
  <main class="main">

    <!-- Top Bar -->
    <header class="topbar">
      <span class="topbar-date" id="topbarDate"></span>

      <div class="search-wrap">
        <span class="search-icon">âŒ•</span>
        <input class="search-input" type="text" placeholder="Search tasksâ€¦" id="searchInput">
        <span class="search-kbd">/</span>
      </div>

      <div class="topbar-spacer"></div>

      <div class="topbar-actions">
        <button class="icon-btn" id="themeToggle" title="Toggle dark/light" onclick="toggleTheme()">â˜½</button>
        <div class="bell-wrap">
          <button class="icon-btn">ğŸ””</button>
          <span class="bell-dot"></span>
        </div>
        <div class="topbar-avatar">JO</div>
      </div>
    </header>

    <!-- Content -->
    <div class="content">

      <!-- â”€â”€ Main Column â”€â”€ -->
      <div class="content-main">

        <!-- Greeting -->
        <div class="greeting">
          <h1 id="greeting">Good evening, Jannat</h1>
          <p>You have <span class="greeting-accent" id="pendingCount">3</span> tasks pending today.</p>
        </div>

        <!-- Stat Cards -->
        <div class="stat-grid">

          <div class="stat-card">
            <div class="stat-icon-box" style="background:rgba(201,168,76,0.14);">
              <span>âœ¦</span>
            </div>
            <div class="stat-number" id="sn0" data-target="12" style="color:var(--text)">0</div>
            <div class="stat-label">Total Tasks</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon-box" style="background:var(--green-dim);">
              <span style="color:var(--green)">âœ“</span>
            </div>
            <div class="stat-number" id="sn1" data-target="9" style="color:var(--green)">0</div>
            <div class="stat-label">Completed</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon-box" style="background:var(--red-dim);">
              <span style="color:var(--red)">â—·</span>
            </div>
            <div class="stat-number" id="sn2" data-target="3" style="color:var(--red)">0</div>
            <div class="stat-label">Pending</div>
          </div>

          <div class="stat-card">
            <div class="stat-icon-box" style="background:var(--cyan-dim);">
              <span style="color:var(--cyan)">â—</span>
            </div>
            <div class="stat-number" id="sn3" data-target="75" style="color:var(--cyan)">0</div>
            <div class="stat-label">Completion %</div>
          </div>

        </div><!-- /stat-grid -->

        <!-- Pending tasks -->
        <div class="section-header">
          <span class="section-title">Pending Tasks</span>
          <button class="btn-new" onclick="addTask()">
            <span class="btn-new-icon">ï¼‹</span>
            <span>New Task</span>
          </button>
        </div>
        <div class="task-list" id="pendingList"></div>

        <!-- Completed tasks -->
        <div class="section-header">
          <span class="section-title">Recently Completed</span>
          <a class="view-all" href="#">View All â†’</a>
        </div>
        <div class="task-list" id="completedList"></div>

      </div><!-- /content-main -->

      <!-- â”€â”€ Analytics Panel â”€â”€ -->
      <aside class="analytics-panel">

        <!-- Rings + Distribution -->
        <div class="a-card">
          <div class="a-title">Analytics</div>

          <div class="ring-row">
            <div class="ring-item">
              <svg class="ring-svg" width="68" height="68" viewBox="0 0 68 68">
                <circle class="ring-track" cx="34" cy="34" r="27" stroke-width="5"/>
                <circle class="ring-fill" id="ring0" cx="34" cy="34" r="27" stroke-width="5"
                  stroke="#00e896"
                  stroke-dasharray="169.65" stroke-dashoffset="169.65"/>
              </svg>
              <div class="ring-val" id="rv0">0%</div>
              <div class="ring-lbl">Done</div>
            </div>
            <div class="ring-item">
              <svg class="ring-svg" width="68" height="68" viewBox="0 0 68 68">
                <circle class="ring-track" cx="34" cy="34" r="27" stroke-width="5"/>
                <circle class="ring-fill" id="ring1" cx="34" cy="34" r="27" stroke-width="5"
                  stroke="#ff3a5c"
                  stroke-dasharray="169.65" stroke-dashoffset="169.65"/>
              </svg>
              <div class="ring-val" id="rv1">0%</div>
              <div class="ring-lbl">Pending</div>
            </div>
          </div>

          <div class="dist-section">
            <div>
              <div class="dist-header"><span>Completed</span><span id="dv0">9</span></div>
              <div class="dist-track"><div class="dist-fill" id="df0" style="background:var(--green)"></div></div>
            </div>
            <div>
              <div class="dist-header"><span>Pending</span><span id="dv1">3</span></div>
              <div class="dist-track"><div class="dist-fill" id="df1" style="background:var(--gold)"></div></div>
            </div>
          </div>
        </div>

        <!-- Weekly chart -->
        <div class="a-card">
          <div class="a-title">This Week</div>
          <div class="week-chart" id="weekChart"></div>
        </div>

        <!-- Streak -->
        <div class="a-card">
          <div class="a-title">Streak</div>
          <div class="streak-center">
            <span class="streak-emoji">ğŸ”¥</span>
            <div class="streak-num" id="streakNum">0</div>
            <div class="streak-sub">Day Streak</div>
          </div>
        </div>

      </aside>

    </div><!-- /content -->
  </main>

  <!-- â•â•â•â•â•â•â•â•â•â• CHAT WIDGET â•â•â•â•â•â•â•â•â•â• -->

  <!-- Chat panel (hidden by default) -->
  <div class="chat-panel" id="chatPanel" style="display:none">

    <!-- Header -->
    <div class="chat-header">
      <div class="chat-header-avatar">âš¡</div>
      <div style="flex:1;overflow:hidden">
        <div class="chat-header-name">TaskFlow Assistant</div>
        <div class="chat-header-sub">â— Online Â· Powered by AI</div>
      </div>
      <button class="chat-close" onclick="closeChat()" title="Close">âœ•</button>
    </div>

    <!-- Messages -->
    <div class="chat-messages" id="chatMessages">
      <!-- empty state shown by JS -->
    </div>

    <!-- Input -->
    <div class="chat-input-area">
      <textarea
        class="chat-textarea"
        id="chatInput"
        placeholder="Ask me to manage your tasksâ€¦"
        rows="1"
        onkeydown="handleChatKey(event)"
        oninput="autoResizeTextarea(this)"
      ></textarea>
      <button class="chat-send" id="chatSendBtn" onclick="sendChat()" title="Send">â¤</button>
    </div>

  </div>

  <!-- FAB -->
  <button class="chat-fab" id="chatFab" onclick="toggleChat()" title="Open AI assistant">âš¡</button>

</div><!-- /app -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const DATA = {
  total: 12, done: 9, pending: 3, rate: 75,
  streak: 7,
  pending_tasks: [
    { title:"Redesign the onboarding flow",        desc:"Update signup + welcome screens with new brand colors", tag:"Design", tagClass:"pill-cyan"  },
    { title:"Fix authentication bug in production", desc:"JWT token expiry not refreshing correctly",             tag:"Bug",    tagClass:"pill-red"   },
    { title:"Write Q1 retrospective document",      desc:"Document wins, losses, and learnings for the quarter", tag:"Docs",   tagClass:"pill-gold"  },
  ],
  done_tasks: [
    { title:"Set up CI/CD pipeline",            desc:"GitHub Actions â†’ Vercel deploy on merge to main"         },
    { title:"Database schema migration v2",     desc:"Added conversation + message tables for AI agent"        },
    { title:"Implement AI chatbot interface",   desc:"OpenAI Agents SDK with MCP tool calling"                 },
    { title:"Dark mode ThemeProvider context",  desc:"CSS custom properties + context-based state management"  },
  ],
  week: [3,5,2,7,4,1,3],
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.addEventListener('DOMContentLoaded', () => {
  setDate();
  setGreeting();
  renderPendingTasks();
  renderDoneTasks();
  buildWeekChart();

  // Restore theme
  const saved = localStorage.getItem('tf-theme');
  if (saved === 'light') _applyTheme('light');

  // Kick animations after slight delay so cards have rendered
  setTimeout(() => {
    countUp('sn0', 0, DATA.total,   1200);
    countUp('sn1', 0, DATA.done,    1200);
    countUp('sn2', 0, DATA.pending, 1200);
    countUp('sn3', 0, DATA.rate,    1200);
    countUp('streakNum', 0, DATA.streak, 900);
    animateRings();
    animateBars();
  }, 200);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATE & GREETING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setDate() {
  document.getElementById('topbarDate').textContent =
    new Date().toLocaleDateString('en-US', {
      weekday:'long', month:'long', day:'numeric', year:'numeric'
    });
}
function setGreeting() {
  const h = new Date().getHours();
  const g = h < 12 ? 'Good morning' : h < 17 ? 'Good afternoon' : 'Good evening';
  document.getElementById('greeting').textContent = `${g}, Jannat`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER TASKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderPendingTasks() {
  const el = document.getElementById('pendingList');
  document.getElementById('pendingCount').textContent = DATA.pending_tasks.length;

  if (!DATA.pending_tasks.length) {
    el.innerHTML = `
      <div class="empty-state">
        <span class="empty-icon">âš¡</span>
        <div class="empty-title">No Pending Tasks</div>
        <div class="empty-sub">Your slate is clear. Add something legendary.</div>
        <span class="empty-cta" onclick="addTask()">+ Create First Task</span>
      </div>`;
    return;
  }

  el.innerHTML = DATA.pending_tasks.map((t, i) => `
    <div class="task-card" style="animation-delay:${460 + i * 80}ms">
      <div class="task-status-bar pending"></div>
      <div class="task-check pending"></div>
      <div class="task-body">
        <div class="task-title">${t.title}</div>
        <div class="task-desc">${t.desc}</div>
        <div class="task-meta">
          <span class="pill ${t.tagClass}">${t.tag}</span>
          <span class="pill pill-muted">Pending</span>
        </div>
      </div>
      <span class="task-dots">Â·Â·Â·</span>
    </div>`).join('');
}

function renderDoneTasks() {
  const el = document.getElementById('completedList');
  el.innerHTML = DATA.done_tasks.map((t, i) => `
    <div class="task-card" style="animation-delay:${600 + i * 80}ms">
      <div class="task-status-bar done"></div>
      <div class="task-check done">âœ“</div>
      <div class="task-body">
        <div class="task-title done">${t.title}</div>
        <div class="task-desc">${t.desc}</div>
        <div class="task-meta">
          <span class="pill pill-green">Completed</span>
        </div>
      </div>
      <span class="task-dots">Â·Â·Â·</span>
    </div>`).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COUNT-UP  (requestAnimationFrame, ease-out cubic)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function countUp(id, from, to, duration) {
  const el = document.getElementById(id);
  if (!el) return;
  const start = performance.now();
  function frame(now) {
    const p    = Math.min((now - start) / duration, 1);
    const ease = 1 - Math.pow(1 - p, 3);           // ease-out cubic
    el.textContent = Math.round(from + (to - from) * ease);
    if (p < 1) requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SVG PROGRESS RINGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function animateRings() {
  const C   = 169.65; // 2Ï€ Ã— r = 2Ï€ Ã— 27
  const p0  = DATA.done    / DATA.total;
  const p1  = DATA.pending / DATA.total;
  const r0  = document.getElementById('ring0');
  const r1  = document.getElementById('ring1');
  const rv0 = document.getElementById('rv0');
  const rv1 = document.getElementById('rv1');
  const t0  = performance.now();

  function frame(now) {
    const p    = Math.min((now - t0) / 1100, 1);
    const ease = 1 - Math.pow(1 - p, 3);
    r0.style.strokeDashoffset = C * (1 - p0 * ease);
    r1.style.strokeDashoffset = C * (1 - p1 * ease);
    rv0.textContent = Math.round(p0 * ease * 100) + '%';
    rv1.textContent = Math.round(p1 * ease * 100) + '%';
    if (p < 1) requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DISTRIBUTION BARS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function animateBars() {
  setTimeout(() => {
    const df0 = document.getElementById('df0');
    const df1 = document.getElementById('df1');
    if (df0) df0.style.width = `${(DATA.done    / DATA.total) * 100}%`;
    if (df1) df1.style.width = `${(DATA.pending / DATA.total) * 100}%`;
  }, 120);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WEEKLY CHART
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildWeekChart() {
  const days     = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
  const todayIdx = (new Date().getDay() + 6) % 7; // Mon=0
  const max      = Math.max(...DATA.week);
  const wrap     = document.getElementById('weekChart');

  wrap.innerHTML = days.map((d, i) => {
    const pct     = Math.round((DATA.week[i] / max) * 100);
    const isToday = i === todayIdx;
    return `
      <div class="wbar-col">
        <div class="wbar${isToday ? ' today' : ''}" style="height:${pct}%"></div>
        <div class="wday${isToday ? ' today' : ''}">${d}</div>
      </div>`;
  }).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME TOGGLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function _applyTheme(theme) {
  document.documentElement.setAttribute('data-theme', theme);
  localStorage.setItem('tf-theme', theme);
  const btn = document.getElementById('themeToggle');
  btn.textContent = theme === 'light' ? 'â˜€' : 'â˜½';
}

function toggleTheme() {
  const btn     = document.getElementById('themeToggle');
  const current = document.documentElement.getAttribute('data-theme');

  // Spin animation
  btn.classList.remove('spinning');
  void btn.offsetWidth; // force reflow so animation restarts
  btn.classList.add('spinning');
  btn.addEventListener('animationend', () => btn.classList.remove('spinning'), { once: true });

  _applyTheme(current === 'dark' ? 'light' : 'dark');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SEARCH SHORTCUT  ( / to focus )
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.addEventListener('keydown', e => {
  if (e.key === '/' && !['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) {
    e.preventDefault();
    document.getElementById('searchInput').focus();
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV ITEM CLICKS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', () => {
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    item.classList.add('active');
  });
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADD TASK (demo)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHAT WIDGET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const CHAT_STATE = {
  open: false,
  messages: [],    // { role: 'user'|'assistant', content: string }
  sending: false,
};

// Demo responses keyed on keyword matches
const BOT_RESPONSES = [
  { match: /add|create|new/i,     reply: "Done! I've added that task to your list. You'll see it appear in Pending Tasks." },
  { match: /delete|remove/i,      reply: "Got it â€” task deleted. Your list is updated." },
  { match: /complete|done|finish/i, reply: "Marked as completed! Great work." },
  { match: /list|show|tasks/i,    reply: `You currently have ${DATA.pending} pending tasks and ${DATA.done} completed.\n\n**Pending:**\n${DATA.pending_tasks.map(t => `â€¢ ${t.title}`).join('\n')}` },
  { match: /hello|hi|hey/i,       reply: "Hello! I'm your TaskFlow AI assistant. I can add tasks, mark them complete, delete them, or give you a summary â€” just ask." },
  { match: /help/i,               reply: "Here's what I can do:\nâ€¢ **Add** a task â€” \"Add review the API docs\"\nâ€¢ **Complete** a task â€” \"Mark authentication bug as done\"\nâ€¢ **Delete** a task â€” \"Delete the retro doc task\"\nâ€¢ **List** tasks â€” \"What tasks do I have pending?\"\nâ€¢ **Bulk actions** â€” \"Complete all tasks\" or \"Delete all tasks\"" },
  { match: /analytics|stats/i,    reply: `Your stats:\nâ€¢ Total: ${DATA.total} tasks\nâ€¢ Completed: ${DATA.done} (${DATA.rate}%)\nâ€¢ Pending: ${DATA.pending}\nâ€¢ Current streak: ${DATA.streak} days ğŸ”¥` },
];

function getBotReply(text) {
  for (const r of BOT_RESPONSES) {
    if (r.match.test(text)) return r.reply;
  }
  return "I understand! Let me help you with that. For the full AI experience, connect the backend and I'll manage your tasks in real time.";
}

function renderChatMessages() {
  const el = document.getElementById('chatMessages');
  if (!el) return;

  if (CHAT_STATE.messages.length === 0 && !CHAT_STATE.sending) {
    el.innerHTML = `
      <div class="chat-empty">
        <div class="chat-empty-icon">âš¡</div>
        <div class="chat-empty-title">TaskFlow Assistant</div>
        <div class="chat-empty-sub">Ask me to add, complete, delete,<br>or list your tasks naturally.</div>
        <div class="chat-chips">
          <span class="chat-chip" onclick="quickSend('List my pending tasks')">ğŸ“‹ List tasks</span>
          <span class="chat-chip" onclick="quickSend('Show my stats')">ğŸ“Š My stats</span>
          <span class="chat-chip" onclick="quickSend('Help')">â“ What can you do?</span>
        </div>
      </div>`;
    return;
  }

  let html = CHAT_STATE.messages.map(m => {
    const isUser = m.role === 'user';
    return `
      <div class="bubble-row ${isUser ? 'user' : ''}">
        <div class="bubble-avatar ${isUser ? 'user' : 'bot'}">${isUser ? 'JO' : 'âš¡'}</div>
        <div class="bubble ${isUser ? 'user' : 'bot'}">${escapeHtml(m.content).replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br>')}</div>
      </div>`;
  }).join('');

  if (CHAT_STATE.sending) {
    html += `
      <div class="typing-row">
        <div class="bubble-avatar bot">âš¡</div>
        <div class="typing-dots">
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        </div>
      </div>`;
  }

  el.innerHTML = html;
  el.scrollTop = el.scrollHeight;
}

function escapeHtml(str) {
  return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function toggleChat() {
  CHAT_STATE.open ? closeChat() : openChat();
}

function openChat() {
  CHAT_STATE.open = true;
  const panel = document.getElementById('chatPanel');
  const fab   = document.getElementById('chatFab');
  panel.style.display = 'flex';
  fab.classList.add('open');
  fab.textContent = 'âœ•';
  renderChatMessages();
  // Focus input
  setTimeout(() => document.getElementById('chatInput')?.focus(), 50);
}

function closeChat() {
  CHAT_STATE.open = false;
  const panel = document.getElementById('chatPanel');
  const fab   = document.getElementById('chatFab');
  panel.style.display = 'none';
  fab.classList.remove('open');
  fab.textContent = 'âš¡';
}

function quickSend(text) {
  document.getElementById('chatInput').value = text;
  sendChat();
}

function sendChat() {
  const input = document.getElementById('chatInput');
  const text  = input.value.trim();
  if (!text || CHAT_STATE.sending) return;

  input.value = '';
  autoResizeTextarea(input);
  CHAT_STATE.messages.push({ role: 'user', content: text });
  CHAT_STATE.sending = true;
  document.getElementById('chatSendBtn').disabled = true;
  renderChatMessages();

  // Simulate network delay (600â€“1200ms)
  const delay = 600 + Math.random() * 600;
  setTimeout(() => {
    const reply = getBotReply(text);
    CHAT_STATE.messages.push({ role: 'assistant', content: reply });
    CHAT_STATE.sending = false;
    document.getElementById('chatSendBtn').disabled = false;
    renderChatMessages();
  }, delay);
}

function handleChatKey(e) {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendChat();
  }
}

function autoResizeTextarea(el) {
  el.style.height = 'auto';
  el.style.height = Math.min(el.scrollHeight, 100) + 'px';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADD TASK (demo)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function addTask() {
  const title = prompt('Task title:');
  if (!title) return;
  const desc = prompt('Short description (optional):') || 'New task added via dashboard';
  DATA.pending_tasks.unshift({ title, desc, tag:'Task', tagClass:'pill-gold' });
  DATA.pending++;
  DATA.total++;
  DATA.rate = Math.round((DATA.done / DATA.total) * 100);
  renderPendingTasks();
  countUp('sn0', 0, DATA.total,   600);
  countUp('sn2', 0, DATA.pending, 600);
  countUp('sn3', 0, DATA.rate,    600);
  document.getElementById('pendingCount').textContent = DATA.pending_tasks.length;
  animateRings();
  animateBars();
}
</script>
</body>
</html>
