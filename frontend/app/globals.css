@import "tailwindcss";

/* ── Class-based dark mode ──────────────────────────── */
@custom-variant dark (&:where(.dark, .dark *));

/* ══════════════════════════════════════════════════════
   LIGHT MODE TOKENS  (:root — default)
══════════════════════════════════════════════════════ */
:root {
  --bg:           #faf7f0;
  --surface:      #ffffff;
  --surface2:     #f5f0e8;
  --surface3:     #ede8dc;
  --border:       #e8dcc8;
  --border2:      #d4c8b0;
  --border-hover: #c9a84c;
  --text:         #1a1410;
  --text2:        #5c4f3a;
  --text3:        #78716c;
  --sidebar-bg:   #1a1a2e;   /* sidebar stays DARK in light mode */
  --topbar-bg:    #faf7f0;
  --input-bg:     #ffffff;
  --gold:         #b8860b;
  --gold-dim:     rgba(184,134,11,0.08);
  --gold-glow:    rgba(184,134,11,0.2);
  --gold-glow-s:  rgba(184,134,11,0.38);
  --green:        #059669;
  --green-dim:    rgba(5,150,105,0.10);
  --red:          #e11d48;
  --red-dim:      rgba(225,29,72,0.08);
  --cyan:         #0d9488;
  --cyan-dim:     rgba(13,148,136,0.09);
  --grid-line:    rgba(184,134,11,0.07);
  --aurora-gold:  rgba(184,134,11,0.06);
  --aurora-cyan:  rgba(13,148,136,0.04);
  --aurora-rose:  rgba(225,29,72,0.04);
}

/* ══════════════════════════════════════════════════════
   DARK MODE TOKENS  (.dark)
══════════════════════════════════════════════════════ */
.dark {
  --bg:           #03030a;
  --surface:      #0e0e1a;
  --surface2:     #13131f;
  --surface3:     #1a1a2e;
  --border:       rgba(201,168,76,0.18);
  --border2:      rgba(201,168,76,0.35);
  --border-hover: rgba(201,168,76,0.55);
  --text:         #e8e0cc;
  --text2:        #a89880;
  --text3:        #6a6455;
  --sidebar-bg:   #080810;
  --topbar-bg:    #08080f;
  --input-bg:     rgba(14,14,26,0.9);
  --gold:         #c9a84c;
  --gold-dim:     rgba(201,168,76,0.12);
  --gold-glow:    rgba(201,168,76,0.28);
  --gold-glow-s:  rgba(201,168,76,0.50);
  --green:        #00e896;
  --green-dim:    rgba(0,232,150,0.12);
  --red:          #ff3a5c;
  --red-dim:      rgba(255,58,92,0.10);
  --cyan:         #00d4ff;
  --cyan-dim:     rgba(0,212,255,0.10);
  --grid-line:    rgba(201,168,76,0.06);
  --aurora-gold:  rgba(201,168,76,0.10);
  --aurora-cyan:  rgba(0,212,255,0.06);
  --aurora-rose:  rgba(255,58,92,0.05);
}

/* ══════════════════════════════════════════════════════
   TAILWIND v4 THEME
══════════════════════════════════════════════════════ */
@theme inline {
  --color-bg:       var(--bg);
  --color-surface:  var(--surface);
  --color-surface2: var(--surface2);
  --color-border:   var(--border);
  --color-text:     var(--text);
  --color-text2:    var(--text2);
  --color-text3:    var(--text3);
  --color-gold:     var(--gold);
  --color-green:    var(--green);
  --color-red:      var(--red);
  --color-cyan:     var(--cyan);
  --font-display:   var(--font-cinzel);
  --font-body:      var(--font-rajdhani);
}

/* ══════════════════════════════════════════════════════
   BASE
══════════════════════════════════════════════════════ */
*, *::before, *::after { box-sizing: border-box; }

html { font-size: 14px; }

body {
  background-color: var(--bg);
  color: var(--text);
  font-family: var(--font-rajdhani), system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  transition: background-color 0.4s ease, color 0.4s ease;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-cinzel), serif;
}

/* ── Smooth transitions on theme switch ─────────────── */
*, *::before, *::after {
  transition:
    background-color 0.4s ease,
    border-color 0.4s ease,
    color 0.4s ease,
    box-shadow 0.4s ease;
}

/* ══════════════════════════════════════════════════════
   KEYFRAMES
══════════════════════════════════════════════════════ */

/* 1. Animated grid background drift */
@keyframes gridDrift {
  from { transform: translateY(0); }
  to   { transform: translateY(-80px); }
}

/* 2. Logo pulse glow */
@keyframes logoPulse {
  0%,100% {
    box-shadow: 0 0 14px rgba(201,168,76,0.55), 0 0 28px rgba(201,168,76,0.22);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 22px rgba(201,168,76,0.9), 0 0 48px rgba(201,168,76,0.45);
    transform: scale(1.06);
  }
}

/* 3. Sidebar scan line */
@keyframes scanLine {
  0%   { left: -70%; opacity: 0; }
  15%  { opacity: 0.9; }
  85%  { opacity: 0.9; }
  100% { left: 110%; opacity: 0; }
}

/* 4. Card entrance */
@keyframes cardIn {
  from { opacity: 0; transform: translateY(22px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* 5. Float (empty state icon) */
@keyframes float {
  0%,100% { transform: translateY(0px); }
  50%      { transform: translateY(-10px); }
}

/* 6. Shimmer sweep */
@keyframes shimmer {
  from { transform: translateX(-160%) skewX(-20deg); }
  to   { transform: translateX(370%) skewX(-20deg); }
}

/* 7. New-task button pulse glow */
@keyframes btnPulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(201,168,76,0); }
  50%      { box-shadow: 0 0 0 9px rgba(201,168,76,0.14), 0 4px 20px rgba(201,168,76,0.3); }
}

/* 8. Theme toggle spin */
@keyframes toggleSpin {
  0%   { transform: rotate(0deg) scale(1); }
  50%  { transform: rotate(180deg) scale(1.3); }
  100% { transform: rotate(360deg) scale(1); }
}

/* 9. Nav hover sweep */
@keyframes navSweep {
  from { transform: translateX(-100%); }
  to   { transform: translateX(120%); }
}

/* 10. Aurora pulse */
@keyframes auroraPulse {
  0%,100% { opacity: 0.45; }
  50%      { opacity: 0.72; }
}

/* 11. Chat FAB pulse */
@keyframes fabPulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(201,168,76,0), 0 6px 20px rgba(201,168,76,0.35); }
  50%      { box-shadow: 0 0 0 10px rgba(201,168,76,0.12), 0 8px 30px rgba(201,168,76,0.5); }
}

/* 12. Chat slide up */
@keyframes chatSlideUp {
  from { opacity: 0; transform: translateY(18px) scale(0.97); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* 13. Typing dots bounce */
@keyframes dotBounce {
  0%,100% { transform: translateY(0); }
  50%      { transform: translateY(-5px); }
}

/* 14. Spinner */
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* 15. Fade in */
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* 16. Slide up (modal) */
@keyframes slideUp {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ══════════════════════════════════════════════════════
   UTILITY CLASSES
══════════════════════════════════════════════════════ */
.animate-fade-in     { animation: fadeIn 0.3s ease forwards; }
.animate-slide-up    { animation: slideUp 0.25s ease forwards; }
.animate-card-in     { animation: cardIn 0.45s ease forwards; }
.animate-float       { animation: float 3.5s ease-in-out infinite; }
.animate-spin        { animation: spin 0.8s linear infinite; }

/* Display / body font helpers */
.font-display { font-family: var(--font-cinzel), serif !important; }
.font-body    { font-family: var(--font-rajdhani), sans-serif !important; }
/* Keep old .font-heading alias so existing components don't break */
.font-heading { font-family: var(--font-cinzel), serif !important; }

/* ── Sidebar nav item ─────────────────────────────── */
.nav-item {
  display: flex;
  align-items: center;
  gap: 11px;
  padding: 9px 12px;
  border-radius: 9px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  border: 1px solid transparent;
  text-decoration: none;
  background: transparent;
  width: 100%;
  text-align: left;
  transition: background 0.2s, border-color 0.2s !important;
}
/* Gold left glow bar */
.nav-item::before {
  content: '';
  position: absolute;
  left: 0; top: 14%; bottom: 14%;
  width: 0;
  border-radius: 0 3px 3px 0;
  background: #c9a84c;
  box-shadow: 0 0 14px #c9a84c, 0 0 28px rgba(201,168,76,0.4);
  transition: width 0.2s ease !important;
  z-index: 2;
}
.nav-item:hover        { background: rgba(201,168,76,0.07); border-color: rgba(201,168,76,0.18); }
.nav-item:hover::before  { width: 3px; }
.nav-item.active         { background: rgba(201,168,76,0.11); border-color: rgba(201,168,76,0.28); }
.nav-item.active::before { width: 3px; }

/* ── Input base ──────────────────────────────────── */
.input-base {
  width: 100%;
  padding: 10px 14px;
  background: var(--input-bg);
  border: 1px solid var(--border);
  border-radius: 10px;
  color: var(--text);
  font-size: 13px;
  font-family: var(--font-rajdhani), sans-serif;
  outline: none;
}
.input-base::placeholder { color: var(--text3); }
.input-base:focus { border-color: var(--gold); box-shadow: 0 0 0 3px var(--gold-dim); }

/* ── Gold gradient button ────────────────────────── */
.btn-gold {
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, #8a6010, #c9a84c, #f0d050, #c9a84c, #8a6010);
  color: #080810;
  border: none;
  cursor: pointer;
  font-family: var(--font-cinzel), serif;
  font-size: 9px;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  transition: transform 0.2s, box-shadow 0.2s !important;
}
.dark .btn-gold { animation: btnPulse 2.8s ease-in-out infinite; }
html:not(.dark) .btn-gold {
  background: linear-gradient(135deg, #b8860b, #c9a84c, #b8860b);
  color: #ffffff;
}
.btn-gold::after {
  content: '';
  position: absolute;
  top: 0; left: -100%;
  width: 55%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.32), transparent);
  transform: skewX(-20deg);
}
.btn-gold:hover::after { animation: shimmer 0.55s ease; }
.btn-gold:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 24px var(--gold-glow-s) !important;
}
.btn-gold:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* Keep old btn-emerald so modal cancel doesn't break */
.btn-emerald {
  background: linear-gradient(135deg, var(--gold), #f0d060);
  color: #080810;
  border: none;
  cursor: pointer;
  transition: opacity 0.2s, transform 0.1s !important;
}
.btn-emerald:hover  { opacity: 0.9; }
.btn-emerald:active { transform: scale(0.98); }
.btn-emerald:disabled { opacity: 0.5; cursor: not-allowed; }

/* ── Card ────────────────────────────────────────── */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 14px;
  transition: border-color 0.25s, box-shadow 0.25s, background 0.4s ease !important;
}
.card:hover {
  border-color: var(--border-hover);
}
.dark .card:hover {
  box-shadow: 0 8px 32px var(--gold-glow);
}

/* ── Chat widget ─────────────────────────────────── */
.chat-fab {
  position: fixed;
  bottom: 24px; right: 24px;
  width: 56px; height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, #8a6010, #c9a84c, #f0d060, #c9a84c, #8a6010);
  border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px;
  box-shadow: 0 8px 24px rgba(201,168,76,0.38);
  z-index: 50;
  transition: transform 0.2s, box-shadow 0.2s !important;
  animation: fabPulse 3s ease-in-out infinite;
}
.chat-fab:hover {
  transform: scale(1.1);
  box-shadow: 0 12px 36px rgba(201,168,76,0.55);
  animation: none;
}
.chat-fab.open {
  animation: none;
  background: linear-gradient(135deg, #5a3008, #8a5020);
  box-shadow: 0 4px 16px rgba(0,0,0,0.4);
}

.chat-panel {
  position: fixed;
  bottom: 92px; right: 24px;
  width: 380px; height: 520px;
  z-index: 49;
  display: flex; flex-direction: column;
  background: var(--surface);
  border: 1px solid var(--border-hover);
  border-radius: 18px;
  overflow: hidden;
  animation: chatSlideUp 0.3s cubic-bezier(0.4,0,0.2,1);
}
.dark .chat-panel {
  box-shadow: 0 24px 64px rgba(0,0,0,0.55), 0 0 0 1px rgba(201,168,76,0.1);
}
html:not(.dark) .chat-panel {
  box-shadow: 0 24px 64px rgba(0,0,0,0.14), 0 0 0 1px rgba(184,134,11,0.15);
}

/* ── Scrollbar ──────────────────────────────────── */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.18); border-radius: 100px; }
::-webkit-scrollbar-thumb:hover { background: rgba(201,168,76,0.4); }

/* ══════════════════════════════════════════════════════
   LAYOUT CLASSES  (owned by CSS — no inline style conflict)
══════════════════════════════════════════════════════ */

/* Main content wrapper */
.main-offset {
  margin-left: 260px;
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  position: relative;
  z-index: 1;
}

/* Stats card grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
}

/* Dashboard two-column layout */
.two-col-layout {
  display: flex;
  flex-direction: row;
  gap: 24px;
  padding: 28px 32px;
  align-items: flex-start;
}

/* Analytics right column */
.analytics-col {
  width: 280px;
  flex-shrink: 0;
  position: sticky;
  top: 0;
}

/* Task card grid */
.task-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 12px;
}

/* Hamburger — hidden on desktop */
.hamburger-btn { display: none; }

/* Sidebar overlay — hidden on desktop */
.sidebar-overlay { display: none; }

/* ══════════════════════════════════════════════════════
   SIDEBAR DRAWER
══════════════════════════════════════════════════════ */
@media (max-width: 767px) {
  .sidebar-responsive {
    transform: translateX(-100%);
    transition: transform 0.28s cubic-bezier(0.4,0,0.2,1);
    z-index: 50;
  }
  .sidebar-responsive.sidebar-open {
    transform: translateX(0);
  }
  .sidebar-overlay {
    display: block;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: 45;
    backdrop-filter: blur(2px);
  }
}
@media (min-width: 768px) {
  .sidebar-responsive { transform: none; }
}

/* ══════════════════════════════════════════════════════
   RESPONSIVE — MOBILE  (≤ 767px)
══════════════════════════════════════════════════════ */
@media (max-width: 767px) {
  /* No sidebar push */
  .main-offset {
    margin-left: 0;
  }

  /* Compact page padding */
  .two-col-layout {
    flex-direction: column;
    padding: 16px;
    gap: 16px;
  }

  /* Stats: 2 × 2 */
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }

  /* Analytics full width below tasks */
  .analytics-col {
    width: 100%;
    position: static;
    flex-shrink: 1;
  }

  /* Tasks single column */
  .task-grid {
    grid-template-columns: 1fr;
  }

  /* Tasks page main padding */
  main { padding: 16px !important; }

  /* Topbar */
  .topbar-date  { display: none; }
  .topbar-search { max-width: 160px; flex: 1; }

  /* Hamburger visible */
  .hamburger-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px; height: 36px;
    border-radius: 8px;
    background: transparent;
    border: 1px solid transparent;
    color: var(--text3);
    cursor: pointer;
    font-size: 20px;
    line-height: 1;
    flex-shrink: 0;
    transition: background 0.2s, border-color 0.2s, color 0.2s;
  }
  .hamburger-btn:hover {
    background: var(--surface);
    border-color: var(--border);
    color: var(--gold);
  }

  /* Chat panel full width */
  .chat-panel {
    width: calc(100vw - 24px);
    right: 12px;
    left: 12px;
    bottom: 80px;
  }

  /* Page header row wrap */
  .page-header-row {
    flex-wrap: wrap;
    gap: 12px;
  }

  /* Filter tabs wrap */
  .filter-tabs {
    flex-wrap: wrap;
  }
}
